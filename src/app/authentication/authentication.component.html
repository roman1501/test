<section class="auth-page">
  <div class="background-glow"></div>
  <div class="background-grid"></div>
  <div class="auth-card">
    <div class="card-header">
      <div class="badge">Безпека даних</div>
      <h1>{{ highlightText() }}</h1>
      <p>
        Вхід за ключем доступу, реєстрація — з підтвердженням через ваш Telegram-акаунт.
      </p>
    </div>

    <div class="mode-toggle" role="tablist">
      <button
        type="button"
        class="mode-button"
        [class.active]="mode() === 'login'"
        (click)="switchMode('login')"
        role="tab"
        [attr.aria-selected]="mode() === 'login'"
      >
        Вхід
      </button>
      <button
        type="button"
        class="mode-button"
        [class.active]="mode() === 'signup'"
        (click)="switchMode('signup')"
        role="tab"
        [attr.aria-selected]="mode() === 'signup'"
      >
        Реєстрація
      </button>
    </div>

    <p class="mobile-intro">
      Для реєстрації введіть справжнє ім’я, ключ доступу та завантажте чітке фото обличчя.
    </p>

    <form class="auth-form" [formGroup]="authForm" (ngSubmit)="submit()" novalidate>
      <div class="form-grid">
        <label class="input-field" *ngIf="showControl('fullName')">
          <span>Справжнє ім'я українською</span>
          <input type="text" placeholder="Напр., Олена Шевченко" formControlName="fullName" />
          <small class="error" *ngIf="authForm.controls.fullName.invalid && authForm.controls.fullName.touched">
            Використовуйте українські літери та пробіли.
          </small>
        </label>

        <label class="input-field">
          <span>{{ mode() === 'login' ? 'Ключ доступу' : 'Ключ доступу / пароль' }}</span>
          <input type="password" placeholder="••••••••" formControlName="password" />
          <div class="input-hint">
            <small>Мінімум 8 символів</small>
          </div>
          <small class="error" *ngIf="authForm.controls.password.invalid && authForm.controls.password.touched">
            Додайте надійний ключ (8+ символів).
          </small>
        </label>

        <label class="input-field" *ngIf="showControl('confirmPassword')">
          <span>Повторіть ключ / пароль</span>
          <input type="password" placeholder="Введіть ще раз" formControlName="confirmPassword" />
          <small
            class="error"
            *ngIf="authForm.controls.confirmPassword.invalid && authForm.controls.confirmPassword.touched"
          >
            {{
              authForm.controls.confirmPassword.hasError('mismatch')
                ? 'Значення мають збігатися.'
                : 'Підтвердіть ключ, щоб продовжити.'
            }}
          </small>
        </label>

        <label class="input-field" *ngIf="showControl('facePhoto')">
          <span>Фото обличчя</span>
          <input type="file" accept="image/*" (change)="handleFile($event)" />
          <div class="input-hint">
            <small>Обличчя має бути чітко видно спереду.</small>
          </div>
          <small class="error" *ngIf="authForm.controls.facePhoto.invalid && authForm.controls.facePhoto.touched">
            Додайте зображення з відкритим обличчям.
          </small>
        </label>
      </div>

      <div class="actions">
        <button class="primary" type="submit" [disabled]="isSubmitting">
          {{ mode() === 'login' ? 'Увійти' : 'Надіслати заявку' }}
        </button>
      </div>
    </form>

    <div class="secondary-actions" *ngIf="mode() === 'login'">
      <button type="button" class="ghost">Забули ключ?</button>
    </div>

    <div class="benefits">
      <h2>Навіщо створювати акаунт?</h2>
      <ul>
        <li *ngFor="let benefit of benefitList">{{ benefit }}</li>
      </ul>
    </div>

    <p class="success" *ngIf="successMessage">{{ successMessage }}</p>
    <p class="error" *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>
</section>
